# OrgShiftQuiz アプリケーション使用書

## 📱 アプリケーション概要

OrgShiftQuizは、組織内での研修・教育を効率化するための統合クイズ管理システムです。Web管理画面とiPhoneアプリを連携させ、ニュース記事や社内文書から自動的にクイズを生成し、従業員に配信できます。

## 🏗️ システム構成

### 1. Web管理画面 (http://localhost:3000)
- **配信ビルダー**: クイズの作成・配信管理
- **コンテンツハブ**: ニュース・文書からのクイズ自動生成
- **ダッシュボード**: 配信状況・回答率の可視化
- **設定**: システム設定・ユーザー管理

### 2. iPhoneアプリ (Expo Go)
- **新着クイズ**: 配信されたクイズの表示
- **更新機能**: 最新クイズの取得
- **クイズ詳細**: 問題数・期限・出典の確認

### 3. バックエンド (Supabase)
- **データベース**: PostgreSQLによるデータ管理
- **Edge Functions**: 自動化処理・AI連携
- **認証**: ユーザー管理・セキュリティ

## 🚀 使用方法

### Web管理画面での操作

#### 1. 配信ビルダー
```
1. メインメニュー → 「配信ビルダー」を選択
2. 配信可能なクイズを選択（チェックボックス）
3. 配信設定を入力：
   - 配信タイトル
   - 回答期限
   - 配信対象セグメント
   - 同意必須設定
4. 「プレビュー」ボタンで内容確認
5. 「配信開始」ボタンで配信実行
```

#### 2. コンテンツハブ
```
1. メインメニュー → 「コンテンツハブ」を選択
2. クイズ生成元を選択：
   - News: 最新ニュース記事
   - Policy: 社内文書・規程
   - Manual: 手動作成
3. 「クイズ生成」ボタンでAI自動生成
4. 生成されたクイズを確認・編集
5. トレイに保存（配信ビルダーで使用可能）
```

#### 3. ダッシュボード
```
1. メインメニュー → 「ダッシュボード」を選択
2. 配信状況の確認：
   - アクティブなクイズ数
   - 回答率・完了率
   - セグメント別統計
```

### iPhoneアプリでの操作

#### 1. アプリ起動
```
1. Expo Goアプリを起動
2. QRコードをスキャン
3. OrgShiftQuizアプリが起動
```

#### 2. クイズ確認
```
1. 新着クイズが一覧表示される
2. 各クイズカードに表示される情報：
   - タイトル
   - 問題数
   - 期限
   - 出典（News/Policy/Manual）
   - 同意必須マーク（🔒）
```

#### 3. 更新・詳細確認
```
1. 更新ボタン（🔄）で最新データ取得
2. クイズカードをタップで詳細表示：
   - クイズ詳細情報
   - 「クイズを開始」ボタン
3. プルリフレッシュ（下スワイプ）でも更新可能
```

## 🔧 技術仕様

### 環境要件
- **Node.js**: 18.x以上
- **npm**: 9.x以上
- **Expo CLI**: 最新版
- **Supabase**: プロジェクト設定済み

### 環境変数設定
```bash
# Webアプリ (.env.local)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# iPhoneアプリ (app.config.js)
supabaseUrl: "https://your-project.supabase.co"
supabaseAnonKey: "your-anon-key"
```

### 起動方法
```bash
# Webアプリ
cd web
npm install
npm run dev

# iPhoneアプリ
cd mobile
npm install
npx expo start
```

## 📊 データフロー

### 1. クイズ生成フロー
```
News/Policy文書 → AI処理 → クイズ下書き → トレイ保存 → 配信ビルダー → 配信実行
```

### 2. 配信フロー
```
配信ビルダー → クイズ作成 → ユーザー割り当て → iPhoneアプリ表示 → 回答処理
```

### 3. データ連携
```
Web管理画面 ←→ Supabase ←→ iPhoneアプリ
     ↓              ↓           ↓
  クイズ作成    データ保存    クイズ表示
  配信管理     ユーザー管理   回答処理
```

## 🎯 主要機能

### 自動化機能
- **ニュース監視**: RSSフィードからの自動記事取得
- **AI生成**: OpenAI連携によるクイズ自動生成
- **配信管理**: スケジュール配信・セグメント管理

### 管理機能
- **ユーザー管理**: 部門別・役職別の配信対象設定
- **進捗管理**: 回答率・完了率の追跡
- **分析機能**: 学習効果の可視化

### セキュリティ機能
- **認証**: Supabase認証システム
- **権限管理**: ロールベースアクセス制御
- **データ保護**: 暗号化・バックアップ

## 🚨 トラブルシューティング

### よくある問題

#### 1. クイズが表示されない
```
- 環境変数の設定を確認
- Supabase接続状況を確認
- 配信ビルダーでクイズが作成されているか確認
```

#### 2. 更新ボタンが動作しない
```
- ネットワーク接続を確認
- アプリを再起動
- コンソールログでエラー確認
```

#### 3. プレビューが表示されない
```
- クイズが選択されているか確認
- 配信タイトルが入力されているか確認
- ブラウザのコンソールでエラー確認
```

### ログ確認方法
```bash
# Webアプリ
ブラウザの開発者ツール → Console

# iPhoneアプリ
ターミナルでExpo起動時のログ出力
```

## 📈 今後の拡張予定

### 短期目標
- [ ] クイズ回答機能の実装
- [ ] 結果表示・解説機能
- [ ] プッシュ通知機能

### 中期目標
- [ ] 学習進捗の可視化
- [ ] 部門別レポート機能
- [ ] モバイルアプリ（Android版）

### 長期目標
- [ ] AI学習効果分析
- [ ] パーソナライズ学習
- [ ] 他システム連携（HR・LMS）

## 📞 サポート

### 開発者情報
- **プロジェクト**: OrgShiftQuiz
- **技術スタック**: Next.js + React Native + Supabase
- **コード行数**: 約40,000行
- **ファイル数**: 62ファイル

### 連絡先
- **GitHub**: https://github.com/saitoh-hideki/OrgShiftQuiz
- **技術サポート**: 開発チームまで

---

**最終更新**: 2025年8月12日  
**バージョン**: 1.0.0  
**作成者**: Claude Code Assistant
